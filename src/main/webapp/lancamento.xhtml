<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui = "http://java.sun.com/jsf/facelets">

<h:head>
   <title>Lançamentos</title>
</h:head>

<h:body>
	
         <ui:include src="/menu.xhtml" />   
	   
	    <b:messages id="msg"></b:messages>
	    <b:form id="formLancamento" >
	          
		            <b:panelGrid columns="2">
		            <f:facet name="header">
		               <h:outputText value="lançamentos" />
		            
		            </f:facet>
		            
		            <b:panel>
		            
		          
		            <b:column>
			            <h:outputLabel value="ID:"/>
			            <b:inputText  value="#{lancamentoBean.lancamento.id}" readonly="true"/>
		            </b:column>
		            
		            <b:column>
			            <h:outputLabel value="Nota:"/>
			            <b:inputText  value="#{lancamentoBean.lancamento.numeNotaFiscal}" required="true" requiredMessage="Informe a nota"/>
		            </b:column>
		            
		            <b:column>
		            
		              <h:outputLabel value="Data Ini.:" />
		              <b:datepicker  locale="en" required="true" requiredMessage="Data Inicial" value="#{lancamentoBean.lancamento.dataIni}"/>
		            
		            </b:column>
		            
		              
		              
		            </b:panel>
		            
		            <b:panel>
		            <b:column>
			            <h:outputLabel value="Origem:"/>
			            <b:inputText  value="#{lancamentoBean.lancamento.empresaOrigem}" required="true" requiredMessage="Informe a origem"/>
		            </b:column>
		            
		            <b:column>
			            <h:outputLabel value="Destino:"/>
			            <b:inputText  value="#{lancamentoBean.lancamento.empresaDestino}" required="true" requiredMessage="Informe o destino"/>
		            </b:column>
		            
		             <b:column>
		            
		              <h:outputLabel value="Data Fin.:"/>
		              <b:datepicker  locale="en" required="true" requiredMessage="Data Final" value="#{lancamentoBean.lancamento.dataFin}"/>
		            
		            </b:column>
		            
		            </b:panel> 
		          </b:panelGrid>
		          
		          <b:column>
		                <h:outputLabel />
			            <h:panelGroup>
						    <h:commandButton value="Novo" action="#{lancamentoBean.novo}" />
					        <h:commandButton value="Salvar" action="#{lancamentoBean.salvar}" />
					        <h:commandButton value="Remover" action="#{lancamentoBean.remover}" rendered="#{pessoaBean.permiteAcesso('Administrador')}"/>
					        <h:commandButton value="Limpar" action="#{lancamentoBean.novo}" />
			            </h:panelGroup>
		              </b:column>
		              
		          <br/>
		     </b:form>
		         
		           <br/>
		           <br/>
		          
		          <b:form>
		          <b:dataTable value="#{lancamentoBean.lancamentos}" var="lanc" border = "3">
		          
		              <f:facet name="header">Lista de Lançamentos</f:facet>
		              
			              <h:column>
			                 <f:facet name="header">ID</f:facet>
			                 <h:outputLabel value="#{lanc.id}"/>
			              </h:column>
		              
		                 <h:column>
			                 <f:facet name="header">Nota Fiscal</f:facet>
			                 <h:outputLabel value="#{lanc.numeNotaFiscal}"/>
		                 </h:column>
		                 
		                 <h:column>
			                 <f:facet name="header">Origem</f:facet>
			                 <h:outputLabel value="#{lanc.empresaOrigem}"/>
		                 </h:column>
		                 
		                 <h:column>
			                 <f:facet name="header">Destino</f:facet>
			                 <h:outputLabel value="#{lanc.empresaDestino}"/>
		                 </h:column>
		                 
		                <h:column>
			                 <f:facet name="header">Usuário</f:facet>
			                 <h:outputLabel value="#{lanc.usuario.nome}"/>
		                 </h:column>
		          
		                 <h:column>
			                 <f:facet name="header">Editar</f:facet>
			                 <h:commandLink title="Editar">
			                     <h:graphicImage value="/resources/img/editar.png" />
			                     <f:setPropertyActionListener value="#{lanc}" target="#{lancamentoBean.lancamento}" />
			                 </h:commandLink>    
		                 </h:column>
		                 
				        <h:column rendered="#{pessoaBean.permiteAcesso('Administrador')}" >
				        
			                <f:facet name="header">Excluir</f:facet>
			                <h:commandLink  action="#{lancamentoBean.remover}" title="Excluir">
			                   <f:setPropertyActionListener value="#{lanc}" target="#{lancamentoBean.lancamento}" />
			                   <h:graphicImage  value="resources/img/delete.png"/>
			                
			                </h:commandLink>
                
           
                         </h:column>
		          
		           </b:dataTable>
		         </b:form> 
	   
	  

</h:body>

</html>